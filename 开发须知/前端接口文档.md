# 校园招聘系统前端接口文档

本文档详细描述了校园招聘系统前端与后端的接口规范，包括接口地址、请求方法、参数说明和返回值格式。

> **注意：** 本文档中的接口当前为前端开发预留，部分接口尚未实现或仅使用模拟数据。详细的未实现接口请参考《前端未完成功能清单.md》文档。

## 接口基础信息

- **基础URL**: `/api`
- **请求头**: 除登录/注册外，所有接口需要在请求头中携带token
  ```
  Authorization: Bearer {token}
  ```
- **响应格式**: 所有接口返回JSON格式数据，基本结构如下：
  ```json
  {
    "code": 200,       // 状态码，200表示成功，非200表示失败
    "message": "操作成功", // 提示信息
    "data": {}         // 返回数据，可能是对象、数组或null
  }
  ```

## 用户认证相关接口

### 登录

- **URL**: `/api/auth/login`
- **方法**: POST
- **描述**: 用户登录接口
- **请求参数**:
  ```json
  {
    "username": "student123",  // 用户名/邮箱
    "password": "password123"  // 密码
  }
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "登录成功",
    "data": {
      "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
      "user_info": {
        "id": 1,
        "username": "student123",
        "user_type": "student",  // student/company/admin
        "avatar": "https://example.com/avatar.jpg",
        "email": "student@example.com"
      }
    }
  }
  ```

### 注册

- **URL**: `/api/auth/register`
- **方法**: POST
- **描述**: 用户注册接口
- **请求参数**:
  ```json
  {
    "username": "student123",  // 用户名
    "password": "password123", // 密码
    "email": "student@example.com", // 邮箱
    "user_type": "student"    // 用户类型：student/company
  }
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "注册成功",
    "data": {
      "id": 1,
      "username": "student123",
      "user_type": "student",
      "email": "student@example.com"
    }
  }
  ```

### 获取用户信息

- **URL**: `/api/auth/user-info`
- **方法**: GET
- **描述**: 获取当前登录用户信息
- **请求参数**: 无
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "id": 1,
      "username": "student123",
      "user_type": "student",
      "avatar": "https://example.com/avatar.jpg",
      "email": "student@example.com",
      "create_time": "2023-01-01T00:00:00Z",
      "status": "active"
    }
  }
  ```

### 退出登录

- **URL**: `/api/auth/logout`
- **方法**: POST
- **描述**: 用户退出登录
- **请求参数**: 无
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "退出成功",
    "data": null
  }
  ```

## 学生相关接口

### 获取学生个人信息

- **URL**: `/api/student/profile`
- **方法**: GET
- **描述**: 获取学生个人信息
- **请求参数**: 无
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "id": 1,
      "username": "student123",
      "real_name": "张三",
      "gender": "male",
      "age": 22,
      "phone": "13800138000",
      "email": "student@example.com",
      "school": "北京大学",
      "major": "计算机科学与技术",
      "education": "本科",
      "graduation_year": 2024,
      "avatar": "https://example.com/avatar.jpg",
      "skills": ["Java", "Python", "Vue"],
      "introduction": "热爱编程，善于团队协作..."
    }
  }
  ```

### 更新学生个人信息

- **URL**: `/api/student/profile`
- **方法**: PUT
- **描述**: 更新学生个人信息
- **请求参数**:
  ```json
  {
    "real_name": "张三",
    "gender": "male",
    "age": 22,
    "phone": "13800138000",
    "school": "北京大学",
    "major": "计算机科学与技术",
    "education": "本科",
    "graduation_year": 2024,
    "skills": ["Java", "Python", "Vue"],
    "introduction": "热爱编程，善于团队协作..."
  }
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "更新成功",
    "data": {
      "id": 1,
      "username": "student123",
      "real_name": "张三",
      "gender": "male",
      "age": 22,
      "phone": "13800138000",
      "email": "student@example.com",
      "school": "北京大学",
      "major": "计算机科学与技术",
      "education": "本科",
      "graduation_year": 2024,
      "avatar": "https://example.com/avatar.jpg",
      "skills": ["Java", "Python", "Vue"],
      "introduction": "热爱编程，善于团队协作..."
    }
  }
  ```

### 上传头像

- **URL**: `/api/student/avatar`
- **方法**: POST
- **描述**: 上传学生头像
- **请求参数**: FormData格式，包含avatar字段（文件）
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "上传成功",
    "data": {
      "avatar_url": "https://example.com/avatar.jpg"
    }
  }
  ```

### 获取简历列表

- **URL**: `/api/student/resumes`
- **方法**: GET
- **描述**: 获取学生简历列表
- **请求参数**: 无
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": [
      {
        "id": 1,
        "name": "个人简历.pdf",
        "url": "https://example.com/resume.pdf",
        "create_time": "2023-01-01T00:00:00Z",
        "is_default": true
      },
      {
        "id": 2,
        "name": "实习简历.pdf",
        "url": "https://example.com/resume2.pdf",
        "create_time": "2023-02-01T00:00:00Z",
        "is_default": false
      }
    ]
  }
  ```

### 上传简历

- **URL**: `/api/student/resumes`
- **方法**: POST
- **描述**: 上传学生简历
- **请求参数**: FormData格式，包含resume字段（文件）
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "上传成功",
    "data": {
      "id": 3,
      "name": "新简历.pdf",
      "url": "https://example.com/resume3.pdf",
      "create_time": "2023-03-01T00:00:00Z",
      "is_default": false
    }
  }
  ```

## 企业相关接口

### 获取企业信息

- **URL**: `/api/company/profile`
- **方法**: GET
- **描述**: 获取企业信息
- **请求参数**: 无
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "id": 1,
      "company_name": "ABC科技有限公司",
      "short_name": "ABC科技",
      "logo": "https://example.com/logo.png",
      "website": "https://www.abc.com",
      "industry": "互联网/IT",
      "scale": "100-499人",
      "financing": "B轮",
      "location": "北京市海淀区",
      "description": "专注于人工智能领域的创新型企业...",
      "audit_status": "approved",  // pending/approved/rejected
      "audit_message": ""
    }
  }
  ```

### 更新企业信息

- **URL**: `/api/company/profile`
- **方法**: PUT
- **描述**: 更新企业信息
- **请求参数**:
  ```json
  {
    "company_name": "ABC科技有限公司",
    "short_name": "ABC科技",
    "website": "https://www.abc.com",
    "industry": "互联网/IT",
    "scale": "100-499人",
    "financing": "B轮",
    "location": "北京市海淀区",
    "description": "专注于人工智能领域的创新型企业..."
  }
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "更新成功",
    "data": {
      "id": 1,
      "company_name": "ABC科技有限公司",
      "short_name": "ABC科技",
      "logo": "https://example.com/logo.png",
      "website": "https://www.abc.com",
      "industry": "互联网/IT",
      "scale": "100-499人",
      "financing": "B轮",
      "location": "北京市海淀区",
      "description": "专注于人工智能领域的创新型企业...",
      "audit_status": "pending",
      "audit_message": ""
    }
  }
  ```

## 职位相关接口

### 获取职位列表

- **URL**: `/api/jobs`
- **方法**: GET
- **描述**: 获取职位列表
- **请求参数**:
  ```
  page: 1                  // 页码，默认1
  pageSize: 10             // 每页数量，默认10
  keyword: "前端"           // 关键词搜索，可选
  location: "北京"          // 地点筛选，可选
  industry: "互联网"        // 行业筛选，可选
  experience: "应届生"      // 经验要求筛选，可选
  education: "本科"         // 学历要求筛选，可选
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "total": 100,
      "list": [
        {
          "id": 1,
          "title": "前端开发工程师",
          "company_id": 1,
          "company_name": "ABC科技有限公司",
          "company_logo": "https://example.com/logo.png",
          "location": "北京",
          "salary_range": "15k-25k",
          "experience_required": "1-3年",
          "education_required": "本科及以上",
          "tags": ["Vue", "React", "TypeScript"],
          "publish_time": "2023-01-01T00:00:00Z"
        },
        // 更多职位...
      ]
    }
  }
  ```

### 获取职位详情

- **URL**: `/api/jobs/:id`
- **方法**: GET
- **描述**: 获取职位详情
- **请求参数**: 路径参数id
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "id": 1,
      "title": "前端开发工程师",
      "company_id": 1,
      "company_name": "ABC科技有限公司",
      "company_logo": "https://example.com/logo.png",
      "company_info": {
        "industry": "互联网/IT",
        "scale": "100-499人",
        "financing": "B轮",
        "location": "北京市海淀区"
      },
      "location": "北京",
      "salary_range": "15k-25k",
      "experience_required": "1-3年",
      "education_required": "本科及以上",
      "tags": ["Vue", "React", "TypeScript"],
      "description": "岗位职责：\n1. 负责公司产品的前端开发...\n\n任职要求：\n1. 熟悉Vue/React等前端框架...",
      "publish_time": "2023-01-01T00:00:00Z",
      "status": "active"  // active/closed
    }
  }
  ```

## 申请相关接口

### 提交职位申请

- **URL**: `/api/applications`
- **方法**: POST
- **描述**: 学生提交职位申请
- **状态**: 已实现基础功能，需要完善错误处理和状态跟踪
- **请求参数**:
  ```json
  {
    "job_id": 1,
    "resume_id": 1,
    "cover_letter": "我对贵公司的前端开发工程师职位很感兴趣..."
  }
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "申请成功",
    "data": {
      "id": 1,
      "job_id": 1,
      "job_title": "前端开发工程师",
      "company_id": 1,
      "company_name": "ABC科技有限公司",
      "resume_id": 1,
      "resume_name": "个人简历.pdf",
      "status": "pending",  // pending/reviewing/interview/offer/rejected
      "apply_time": "2023-03-01T00:00:00Z"
    }
  }
  ```

### 获取申请列表（学生）

- **URL**: `/api/student/applications`
- **方法**: GET
- **描述**: 获取学生的申请列表
- **请求参数**:
  ```
  page: 1                  // 页码，默认1
  pageSize: 10             // 每页数量，默认10
  status: "pending"        // 状态筛选，可选
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "total": 5,
      "list": [
        {
          "id": 1,
          "job_id": 1,
          "job_title": "前端开发工程师",
          "company_id": 1,
          "company_name": "ABC科技有限公司",
          "company_logo": "https://example.com/logo.png",
          "resume_id": 1,
          "resume_name": "个人简历.pdf",
          "status": "pending",
          "apply_time": "2023-03-01T00:00:00Z",
          "feedback": ""
        },
        // 更多申请...
      ]
    }
  }
  ```

## 推荐相关接口

### 获取推荐职位

- **URL**: `/api/student/recommendations`
- **方法**: GET
- **描述**: 获取为学生推荐的职位
- **状态**: 当前使用模拟数据，待与后端推荐算法对接
- **请求参数**:
  ```
  page: 1                  // 页码，默认1
  pageSize: 10             // 每页数量，默认10
  recommendation_type: "skill"  // 推荐类型：skill/history/comprehensive，可选
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "total": 10,
      "list": [
        {
          "id": 1,
          "job_id": 1,
          "job_title": "前端开发工程师",
          "company_id": 1,
          "company_name": "ABC科技有限公司",
          "company_logo": "https://example.com/logo.png",
          "location": "北京",
          "salary_range": "15k-25k",
          "match_score": 95,  // 匹配度分数
          "match_reason": "技能匹配度高，专业相符"
        },
        // 更多推荐...
      ]
    }
  }
  ```

## 管理员相关接口

### 获取用户列表

- **URL**: `/api/admin/users`
- **方法**: GET
- **描述**: 获取用户列表
- **请求参数**:
  ```
  page: 1                  // 页码，默认1
  pageSize: 10             // 每页数量，默认10
  user_type: "student"     // 用户类型筛选，可选
  keyword: "张三"          // 关键词搜索，可选
  status: "active"         // 状态筛选，可选
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "total": 100,
      "list": [
        {
          "id": 1,
          "username": "student123",
          "user_type": "student",
          "email": "student@example.com",
          "real_name": "张三",
          "avatar": "https://example.com/avatar.jpg",
          "status": "active",
          "create_time": "2023-01-01T00:00:00Z"
        },
        // 更多用户...
      ]
    }
  }
  ```

### 获取企业审核列表

- **URL**: `/api/admin/companies/audit`
- **方法**: GET
- **描述**: 获取待审核的企业列表
- **请求参数**:
  ```
  page: 1                  // 页码，默认1
  pageSize: 10             // 每页数量，默认10
  status: "pending"        // 状态筛选，可选
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "获取成功",
    "data": {
      "total": 20,
      "list": [
        {
          "id": 1,
          "company_name": "ABC科技有限公司",
          "logo": "https://example.com/logo.png",
          "industry": "互联网/IT",
          "scale": "100-499人",
          "location": "北京市海淀区",
          "audit_status": "pending",
          "create_time": "2023-01-01T00:00:00Z"
        },
        // 更多企业...
      ]
    }
  }
  ```

### 审核企业

- **URL**: `/api/admin/companies/:id/audit`
- **方法**: POST
- **描述**: 审核企业信息
- **请求参数**:
  ```json
  {
    "audit_status": "approved",  // approved/rejected
    "audit_message": "审核通过"   // 审核意见，拒绝时必填
  }
  ```
- **响应示例**:
  ```json
  {
    "code": 200,
    "message": "审核成功",
    "data": {
      "id": 1,
      "company_name": "ABC科技有限公司",
      "audit_status": "approved",
      "audit_message": "审核通过"
    }
  }
  ```

## 错误码说明

| 错误码 | 说明 |
| ----- | ---- |
| 200 | 成功 |
| 400 | 请求参数错误 |
| 401 | 未授权（未登录或token无效） |
| 403 | 权限不足 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

## 未实现接口说明

以下接口当前尚未完全实现或仅使用模拟数据，需要在后续开发中完善：

1. **找回密码接口** - 当前仅有页面骨架，需要实现完整功能
2. **简历上传与管理接口** - 需要完善文件上传和预览功能
3. **推荐算法接口** - 当前使用模拟数据，需要与后端算法对接
4. **消息通知接口** - 当前未实现，需要完整开发
5. **数据统计与图表接口** - 当前仅有基础数据，需要完善
6. **文件导出接口** - 当前未实现，需要完整开发

详细的未完成功能请参考《前端未完成功能清单.md》文档。

## 注意事项

1. 所有接口（除登录/注册外）都需要在请求头中携带token
2. 文件上传接口使用FormData格式
3. 分页接口默认返回第1页，每页10条数据
4. 时间格式统一使用ISO 8601标准（YYYY-MM-DDTHH:mm:ssZ）
5. 接口返回的数据结构可能会随着业务需求的变化而调整
6. 当前大部分接口使用模拟数据，后续将与真实后端对接
