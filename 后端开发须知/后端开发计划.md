# 校园招聘系统后端开发计划

本文档基于《后端项目开发大纲》和前端相关文档（接口、未完成清单、测试），制定后端分阶段开发计划。

**核心技术栈**: Spring Boot (主服务), Django (推荐服务), PostgreSQL, Docker

**优先级**: P0 (最高), P1 (中), P2 (最低)

---

## 阶段一：基础架构与核心认证 (P0)

**目标**: 搭建项目骨架，实现核心用户认证流程，为后续模块开发奠定基础。

**Spring Boot 主服务:**
- [ ] **项目初始化**:
    - [ ] 使用 Spring Initializr 创建 Spring Boot 项目 (Java, Maven/Gradle, Web, JPA, PostgreSQL Driver, Security, Lombok, Validation)。
    - [ ] 配置 `application.yml` (数据库连接, 服务器端口等)。
    - [ ] 引入 Flyway/Liquibase 并配置，创建初始数据库迁移脚本 (User表基础结构)。
- [ ] **基础配置**:
    - [ ] 配置全局跨域 (CORS)。
    - [ ] 配置全局异常处理器。
    - [ ] 配置 Jackson 实现驼峰与下划线转换。
    - [ ] 配置日志框架 (SLF4J + Logback/Log4j2)。
- [ ] **实体与数据访问**:
    - [ ] 创建 `User` 实体类 (`entity/User.java`)。
    - [ ] 创建 `UserRepository` (`repository/UserRepository.java`) 继承 `JpaRepository`。
- [ ] **认证模块**:
    - [ ] **配置 Spring Security**:
        - [ ] 基础安全配置 (`config/SecurityConfig.java`)。
        - [ ] 配置密码编码器 (`BCryptPasswordEncoder`)。
    - [ ] **用户注册**:
        - [ ] 创建注册 DTO (`dto/request/RegisterRequest.java`)。
        - [ ] 实现注册 Service 逻辑 (`service/AuthService.java`, 检查用户名/邮箱唯一性, 密码加密)。
        - [ ] 实现注册 Controller (`controller/AuthController.java`, `/api/auth/register`)。
        - [ ] 添加输入验证 (`@Valid`)。
    - [ ] **用户登录**:
        - [ ] 创建登录 DTO (`dto/request/LoginRequest.java`)。
        - [ ] 创建 JWT 工具类 (`security/JwtTokenProvider.java` 或类似)。
        - [ ] 实现登录 Service 逻辑 (验证用户, 生成 JWT Token 和 Refresh Token)。
        - [ ] 实现登录 Controller (`/api/auth/login`)。
    - [ ] **JWT 认证过滤器**:
        - [ ] 创建 JWT 过滤器 (`security/JwtAuthenticationFilter.java`)，解析 Token 并设置认证信息到 SecurityContext。
        - [ ] 将过滤器添加到 Spring Security 配置链。
    - [ ] **获取用户信息**:
        - [ ] 实现获取当前登录用户信息的 Controller (`/api/auth/user-info`)。
    - [ ] **退出登录**:
        - [ ] 实现退出登录 Controller (`/api/auth/logout`) (可能需要后端处理 Token 黑名单或依赖前端删除 Token)。
- [ ] **基础测试**:
    - [ ] 编写认证相关接口的集成测试。

**PostgreSQL 数据库:**
- [ ] 创建数据库实例。
- [ ] 配合 Spring Boot 完成数据库表结构初始化 (通过迁移工具)。

**通用:**
- [ ] **项目文档**: 初始化 `README.md`。
- [ ] **版本控制**: 初始化 Git 仓库，提交基础架构代码。
- [ ] **容器化**: 编写基础 `Dockerfile` for Spring Boot。
- [ ] **本地环境**: 编写 `docker-compose.yml` 启动 PostgreSQL 和 Spring Boot 服务。

---

## 阶段二：核心业务模块 - 用户、职位、简历 (P0)

**目标**: 实现学生、企业、管理员的基本信息管理，职位发布与查询，简历上传与管理。

**Spring Boot 主服务:**
- [ ] **用户管理**:
    - [ ] **实体**: 创建 `StudentProfile`, `CompanyProfile` 实体，建立与 `User` 的关联。更新数据库迁移。
    - [ ] **DTO**: 创建用户/学生/企业信息相关的 Request/Response DTO。
    - [ ] **学生信息**: 实现 `StudentController`, `StudentService` (获取/更新学生档案)。
    - [ ] **企业信息**: 实现 `CompanyController`, `CompanyService` (获取/更新企业信息)。
    - [ ] **头像/Logo上传**:
        - [ ] 配置/实现文件存储服务客户端 (OSS/MinIO)。
        - [ ] 实现文件上传接口 (`/api/student/avatar`, `/api/company/logo`)。
        - [ ] 更新用户/企业实体中的头像/Logo URL。
    - [ ] **管理员用户管理**:
        - [ ] 实现用户列表查询接口 (`/api/admin/users`, 含分页、筛选)。
        - [ ] 实现用户状态管理接口 (`/api/admin/users/{id}/status`)。
- [ ] **职位管理**:
    - [ ] **实体**: 创建 `Job` 实体，建立与 `CompanyProfile` 的关联。更新数据库迁移。
    - [ ] **DTO**: 创建职位相关的 Request/Response DTO。
    - [ ] **企业端**:
        - [ ] 实现职位发布/更新接口 (`controller/JobController.java` for company role)。
        - [ ] 实现企业查询自己的职位列表接口。
        - [ ] 实现职位状态管理接口 (开放/关闭)。
    - [ ] **公共查询**:
        - [ ] 实现职位列表查询接口 (`/api/jobs`, 含分页、多条件筛选 - location, industry, experience, education, keyword)。
        - [ ] 实现职位详情查询接口 (`/api/jobs/{id}`)。
- [ ] **简历管理**:
    - [ ] **实体**: 创建 `Resume` 实体，建立与 `User` (学生) 的关联。更新数据库迁移。
    - [ ] **DTO**: 创建简历相关的 Request/Response DTO。
    - [ ] **接口**:
        - [ ] 实现简历上传接口 (`/api/student/resumes`, 对接文件存储，保存元数据)。
        - [ ] 实现简历列表查询接口 (`/api/student/resumes`)。
        - [ ] 实现简历删除接口 (`/api/student/resumes/{id}`)。
        - [ ] 实现设置默认简历接口 (`/api/student/resumes/{id}/default`)。
- [ ] **权限控制**:
    - [ ] 细化 Spring Security 配置，确保各接口按角色 (student, company, admin) 授权。
- [ ] **测试**:
    - [ ] 编写用户、职位、简历模块的单元测试和集成测试。

**通用:**
- [ ] **API 文档**: 使用 Swagger/OpenAPI (Springdoc) 自动生成 API 文档。
- [ ] 更新 `docker-compose.yml` (如果需要引入文件存储服务)。

---

## 阶段三：核心业务模块 - 申请流程 (P0)

**目标**: 实现完整的职位申请、处理流程。

**Spring Boot 主服务:**
- [ ] **申请管理**:
    - [ ] **实体**: 创建 `Application` 实体，关联 `User`(学生), `Job`, `Resume`。更新数据库迁移。
    - [ ] **DTO**: 创建申请相关的 Request/Response DTO。
    - [ ] **学生端**:
        - [ ] 实现提交申请接口 (`/api/applications`)。
        - [ ] 实现查询我的申请列表接口 (`/api/student/applications`, 含状态筛选)。
        - [ ] 实现撤回申请接口 (`/api/applications/{id}/withdraw`) (待定，前端文档有此功能)。
    - [ ] **企业端**:
        - [ ] 实现查询收到的申请列表接口 (`/api/company/applications`, 关联到特定职位或所有职位，含筛选)。
        - [ ] 实现处理申请接口 (更新申请状态: `/api/company/applications/{id}/status`)。
        - [ ] 实现面试安排接口 (可能需要创建 Interview 实体或字段)。
        - [ ] 实现记录面试反馈接口。
- [ ] **测试**:
    - [ ] 编写申请流程相关接口的单元测试和集成测试。

---

## 阶段四：管理员核心功能 (P0/P1)

**目标**: 实现管理员对企业和系统的管理功能。

**Spring Boot 主服务:**
- [ ] **企业审核**: (P0)
    - [ ] 实现待审核企业列表查询接口 (`/api/admin/companies/audit`)。
    - [ ] 实现审核企业操作接口 (`/api/admin/companies/{id}/audit`, 更新 `CompanyProfile` 的 `auditStatus`, `auditMessage`)。
- [ ] **数据看板/统计**: (P1)
    - [ ] 设计并实现管理员看板所需的数据聚合查询接口 (用户增长、职位发布、申请趋势等)。
- [ ] **系统通知管理**: (P1, 结合通知模块)
    - [ ] 实现发布系统通知接口。
- [ ] **测试**:
    - [ ] 编写管理员功能相关接口的集成测试。

---

## 阶段五：智能推荐与消息通知 (P1)

**目标**: 实现职位智能推荐和站内消息通知功能。

**Django 推荐服务:**
- [ ] **项目初始化**:
    - [ ] 创建 Django 项目 (`recommendation-service-django`)。
    - [ ] 创建 `recommender` app。
    - [ ] 配置数据库连接 (只读权限访问主库或同步所需数据)。
- [ ] **算法实现**:
    - [ ] 实现数据获取逻辑 (用户行为数据、职位特征等)。
    - [ ] 实现协同过滤算法 (`services/collaborative_filtering.py`)。
    - [ ] (可选) 设计模型训练/更新机制 (定时任务 Celery/APScheduler)。
- [ ] **API接口**:
    - [ ] 使用 Django REST Framework 或原生 Django View 实现推荐 API (e.g., `GET /recommendations/user/{user_id}/jobs`)。
- [ ] **容器化**: 编写 `Dockerfile` for Django。
- [ ] **测试**: 编写推荐算法和 API 的测试 (Pytest)。

**Spring Boot 主服务:**
- [ ] **调用推荐服务**:
    - [ ] 引入 Feign Client 或 RestTemplate。
    - [ ] 配置 Django 服务地址。
    - [ ] 创建调用 Django 推荐 API 的客户端 (`client/RecommendationClient.java`)。
    - [ ] 实现前端获取推荐职位的接口 (`/api/student/recommendations`)，内部调用 Django 服务。
- [ ] **消息通知**:
    - [ ] **实体**: 创建 `Notification` 实体。更新数据库迁移。
    - [ ] **DTO**: 创建通知相关的 DTO。
    - [ ] **Service**:
        - [ ] 实现通知生成逻辑 (集成到申请状态变更、面试安排等业务流程中)。
        - [ ] 实现发送系统通知逻辑。
    - [ ] **Controller**:
        - [ ] 实现获取通知列表接口 (`/api/notifications`, 分页, 未读/已读)。
        - [ ] 实现获取未读通知数量接口 (`/api/notifications/unread-count`)。
        - [ ] 实现标记通知已读接口 (`/api/notifications/{id}/read`, 或批量已读)。
    - [ ] (可选) **集成MQ**: 配置 MQ 生产者和消费者，异步发送通知。
- [ ] **测试**:
    - [ ] 编写调用推荐服务和通知功能的集成测试。

**通用:**
- [ ] 更新 `docker-compose.yml` 添加 Django 服务。

---

## 阶段六：高级功能与优化 (P1/P2)

**目标**: 实现前端未完成清单中的高级功能，进行性能和体验优化。

**Spring Boot 主服务:**
- [ ] **高级搜索**: (P2)
    - [ ] 考虑引入 Elasticsearch 实现更强大的职位/简历搜索功能。
    - [ ] 完善现有筛选接口的性能。
- [ ] **数据导出**: (P1)
    - [ ] 实现列表数据导出为 Excel/CSV 功能 (如 EasyExcel)。
    - [ ] 实现简历导出功能 (如果是在线简历)。
- [ ] **密码找回**: (P1)
    - [ ] 实现发送邮件验证码/链接的逻辑 (集成邮件服务)。
    - [ ] 实现验证码/链接校验及密码重置接口。
- [ ] **在线简历编辑**: (P2)
    - [ ] 设计存储在线简历内容的数据库模型。
    - [ ] 实现相关 CRUD 接口。
- [ ] **缓存应用**: (P1)
    - [ ] 配置 Redis。
    - [ ] 在热点数据接口 (如职位列表、用户信息) 应用缓存 (`@Cacheable`等)。
- [ ] **性能优化**: (P2)
    - [ ] 分析慢查询，优化 SQL 和索引。
    - [ ] 优化 JVM 参数。
    - [ ] 接口性能压测。
- [ ] **安全性加固**: (P1)
    - [ ] 实现 API 限流 (如 Resilience4j, Sentinel)。
    - [ ] 定期进行安全审计和依赖库扫描。

**Django 推荐服务:**
- [ ] **算法优化**: (P2)
    - [ ] 尝试其他推荐算法 (基于内容、混合)。
    - [ ] 优化模型训练和推荐性能。

---

## 阶段七：测试、部署与监控 (持续进行 P0/P1)

**目标**: 确保系统质量，建立完善的部署和监控体系。

**通用:**
- [ ] **完善测试**: (持续 P0)
    - [ ] 提高单元测试和集成测试覆盖率。
    - [ ] 进行接口压力测试。
- [ ] **CI/CD**: (P1)
    - [ ] 搭建完整的 CI/CD 流水线 (自动化测试、构建镜像、部署)。
- [ ] **部署**: (P1)
    - [ ] 部署到测试环境、预发布环境、生产环境。
    - [ ] 配置 Nginx/Gateway 进行反向代理和负载均衡。
- [ ] **日志与监控**: (P1)
    - [ ] 搭建集中式日志系统 (ELK/EFK)。
    - [ ] 配置应用性能监控 (APM, 如 SkyWalking) 和系统监控 (Prometheus + Grafana)。
    - [ ] 配置错误监控 (Sentry)。
- [ ] **文档完善**: (持续 P1)
    - [ ] 完善 API 文档。
    - [ ] 编写部署和运维文档。

---

**说明**:
- 本计划为初步规划，具体任务细节和优先级可能根据实际开发进度和需求变化进行调整。
- 每个任务点完成后应进行代码审查 (Code Review)。
- 测试应贯穿整个开发过程。
- 与前端团队保持密切沟通，确保接口对接顺利。 