# 校园招聘系统前端测试文档

本文档详细描述了校园招聘系统前端的测试策略、测试范围和测试用例，包括单元测试和端到端测试。

## 测试策略

### 测试类型

1. **单元测试**：使用Vitest测试框架，测试组件、状态管理和工具函数的功能正确性。
2. **端到端测试**：使用Playwright测试框架，测试用户交互流程和页面功能的完整性。

### 测试范围

1. **组件测试**：测试通用组件和业务组件的渲染和交互逻辑。
2. **状态管理测试**：测试Pinia store的状态变更和异步操作。
3. **工具函数测试**：测试工具函数的输入输出正确性。
4. **页面流程测试**：测试关键用户流程，如登录、注册、职位申请等。

### 测试环境

1. **开发环境**：本地开发环境，使用模拟数据。
2. **CI环境**：持续集成环境，使用模拟数据。
3. **预发布环境**：与后端集成的预发布环境，使用真实数据。

## 单元测试

### 组件测试

#### 通用组件测试

| 组件名 | 测试用例 | 测试内容 |
| ----- | ------- | ------- |
| Navbar | 未登录状态渲染 | 验证未登录时显示登录/注册按钮 |
| Navbar | 已登录状态渲染 | 验证已登录时显示用户信息和下拉菜单 |
| Navbar | 导航链接点击 | 验证点击导航链接时正确跳转 |
| Sidebar | 菜单项渲染 | 验证根据用户角色显示不同菜单项 |
| Sidebar | 折叠功能 | 验证折叠按钮点击时正确切换折叠状态 |
| JobCard | 职位信息渲染 | 验证职位卡片正确显示职位信息 |
| JobCard | 点击跳转 | 验证点击职位卡片时跳转到详情页 |
| CompanyCard | 企业信息渲染 | 验证企业卡片正确显示企业信息 |
| UserAvatar | 头像显示 | 验证头像组件正确显示用户头像 |
| UserAvatar | 上传功能 | 验证头像上传功能正常工作 |
| Pagination | 分页功能 | 验证分页组件正确响应页码变化 |
| Modal | 显示隐藏 | 验证模态框的显示和隐藏功能 |
| Modal | 确认取消 | 验证确认和取消按钮的回调函数 |

#### 业务组件测试

| 组件名 | 测试用例 | 测试内容 |
| ----- | ------- | ------- |
| LoginForm | 表单验证 | 验证登录表单的字段验证功能 |
| LoginForm | 提交功能 | 验证表单提交时调用登录API |
| RegisterForm | 表单验证 | 验证注册表单的字段验证功能 |
| RegisterForm | 提交功能 | 验证表单提交时调用注册API |
| JobFilter | 筛选条件 | 验证筛选条件变化时触发筛选事件 |
| ResumeUploader | 文件上传 | 验证简历上传功能正常工作 |
| ApplicationList | 列表渲染 | 验证申请列表正确显示申请记录 |

### 状态管理测试

#### 用户状态测试

| Store | 测试用例 | 测试内容 |
| ----- | ------- | ------- |
| userStore | 初始状态 | 验证初始状态为未登录状态 |
| userStore | 登录功能 | 验证登录成功后状态正确更新 |
| userStore | 登出功能 | 验证登出后状态正确清空 |
| userStore | 获取用户信息 | 验证获取用户信息功能正常工作 |

#### 职位状态测试

| Store | 测试用例 | 测试内容 |
| ----- | ------- | ------- |
| jobStore | 获取职位列表 | 验证获取职位列表功能正常工作 |
| jobStore | 获取职位详情 | 验证获取职位详情功能正常工作 |
| jobStore | 筛选功能 | 验证筛选条件变化时正确更新列表 |

#### 申请状态测试

| Store | 测试用例 | 测试内容 |
| ----- | ------- | ------- |
| applicationStore | 获取申请列表 | 验证获取申请列表功能正常工作 |
| applicationStore | 提交申请 | 验证提交申请功能正常工作 |
| applicationStore | 取消申请 | 验证取消申请功能正常工作 |

### 工具函数测试

| 函数 | 测试用例 | 测试内容 |
| --- | ------- | ------- |
| request | 请求拦截器 | 验证请求拦截器正确添加token |
| request | 响应拦截器 | 验证响应拦截器正确处理错误 |
| formatDate | 日期格式化 | 验证日期格式化函数输出正确 |
| validateForm | 表单验证 | 验证表单验证函数正确验证字段 |

## 端到端测试

### 认证流程测试

| 测试用例 | 测试步骤 | 预期结果 |
| ------- | ------- | ------- |
| 登录页面渲染 | 访问登录页面 | 页面正确显示登录表单 |
| 登录成功 | 输入正确的用户名和密码，点击登录按钮 | 登录成功并跳转到对应角色的首页 |
| 登录失败 | 输入错误的用户名和密码，点击登录按钮 | 显示错误提示信息 |
| 注册页面渲染 | 访问注册页面 | 页面正确显示注册表单 |
| 注册成功 | 输入有效的注册信息，点击注册按钮 | 注册成功并跳转到登录页面 |
| 注册失败 | 输入无效的注册信息，点击注册按钮 | 显示错误提示信息 |
| 退出登录 | 点击退出登录按钮 | 成功退出并跳转到登录页面 |

### 学生端流程测试

| 测试用例 | 测试步骤 | 预期结果 |
| ------- | ------- | ------- |
| 仪表盘页面 | 学生登录后访问仪表盘 | 页面正确显示个人信息和推荐职位 |
| 个人信息页面 | 访问个人信息页面 | 页面正确显示个人信息表单 |
| 更新个人信息 | 修改个人信息并提交 | 信息更新成功并显示更新后的信息 |
| 职位列表页面 | 访问职位列表页面 | 页面正确显示职位列表 |
| 职位筛选 | 设置筛选条件并搜索 | 显示符合条件的职位列表 |
| 职位详情页面 | 点击职位卡片 | 跳转到职位详情页面并显示详细信息 |
| 申请职位 | 在职位详情页点击申请按钮 | 显示申请表单，提交后显示申请成功 |
| 简历管理页面 | 访问简历管理页面 | 页面正确显示简历列表 |
| 上传简历 | 点击上传按钮并选择文件 | 简历上传成功并显示在列表中 |
| 申请记录页面 | 访问申请记录页面 | 页面正确显示申请记录列表 |
| 推荐页面 | 访问推荐页面 | 页面正确显示推荐职位列表 |

### 企业端流程测试

| 测试用例 | 测试步骤 | 预期结果 |
| ------- | ------- | ------- |
| 仪表盘页面 | 企业登录后访问仪表盘 | 页面正确显示企业信息和统计数据 |
| 企业信息页面 | 访问企业信息页面 | 页面正确显示企业信息表单 |
| 更新企业信息 | 修改企业信息并提交 | 信息更新成功并显示更新后的信息 |
| 职位管理页面 | 访问职位管理页面 | 页面正确显示职位列表 |
| 创建职位 | 点击创建按钮并填写表单 | 职位创建成功并显示在列表中 |
| 编辑职位 | 点击编辑按钮并修改表单 | 职位更新成功并显示更新后的信息 |
| 申请管理页面 | 访问申请管理页面 | 页面正确显示申请列表 |
| 处理申请 | 点击处理按钮并选择状态 | 申请状态更新成功 |

### 管理员端流程测试

| 测试用例 | 测试步骤 | 预期结果 |
| ------- | ------- | ------- |
| 仪表盘页面 | 管理员登录后访问仪表盘 | 页面正确显示系统统计数据 |
| 用户管理页面 | 访问用户管理页面 | 页面正确显示用户列表 |
| 用户状态管理 | 点击禁用/启用按钮 | 用户状态更新成功 |
| 企业审核页面 | 访问企业审核页面 | 页面正确显示待审核企业列表 |
| 审核企业 | 点击审核按钮并选择状态 | 企业审核状态更新成功 |

## 测试覆盖率目标

| 测试类型 | 覆盖率目标 |
| ------- | --------- |
| 单元测试 | 行覆盖率 > 80% |
| 单元测试 | 分支覆盖率 > 70% |
| 单元测试 | 函数覆盖率 > 90% |
| 端到端测试 | 关键流程覆盖率 100% |

## 测试执行

### 单元测试执行

```bash
# 运行所有单元测试
pnpm test:unit

# 运行特定文件的测试
pnpm test:unit src/components/__tests__/Navbar.spec.ts

# 生成覆盖率报告
pnpm test:unit:coverage
```

### 端到端测试执行

```bash
# 运行所有端到端测试
pnpm test:e2e

# 运行特定文件的测试
pnpm test:e2e e2e/auth.spec.ts

# 使用UI模式运行测试
pnpm test:e2e:ui
```

## 测试报告

测试报告将包含以下内容：

1. 测试执行摘要（通过/失败/跳过的测试数量）
2. 测试覆盖率报告
3. 失败测试的详细信息
4. 测试执行时间

## 持续集成

在持续集成环境中，测试将按以下流程执行：

1. 代码提交触发CI流程
2. 安装依赖
3. 运行ESLint检查
4. 运行单元测试
5. 构建项目
6. 运行端到端测试
7. 生成测试报告
8. 部署（如果所有测试通过）

## 测试维护

1. 随着功能变更，及时更新测试用例
2. 定期检查测试覆盖率，确保达到目标
3. 对于发现的bug，添加对应的回归测试
4. 定期重构测试代码，保持可维护性
